<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="_user_guide/generator/pandoc.css" type="text/css" />
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#dungeon-actor">Dungeon Actor</a><ul>
<li><a href="#procedural-generation-parameters">Procedural Generation Parameters</a></li>
</ul></li>
</ul>
</div>
<h1 id="introduction">Introduction</h1>
<p>Dungeon Architect is a plugin for Unreal Engine 4 Editor that helps in streamlining the level creation process. It allows you to quickly create levels procedurally (or manually) by blocking out volumes and having the plugin build the environment automatically around it. This document introduces you to the various features of Dungeon Architect and guides you through the creation of a simple level</p>
<h1 id="installation">Installation</h1>
<ul>
<li>In your game’s root directory, create a folder named Plugins</li>
<li>Copy the DungeonArchitect folder found in this archive under Plugin/4.X/ into your game’s plugin folder (which was created in step 1). For example, in the ShooterGame sample demo, the directory structure should look like this: <img src="_html/images/user_guide/install_step1.png" alt="Install Step 1" /></li>
<li>Restart the Unreal Editor (if already open) and verify that Dungeon Architect is enabled by navigating to Window Menu &gt; Plugins. <img src="_html/images/user_guide/install_step2.png" alt="Install Step 2" /></li>
<li>Confirm that Dungeon Architect is visible and enabled <img src="_html/images/user_guide/install_step3.png" alt="Install Step 3" /></li>
</ul>
<h1 id="dungeon-actor">Dungeon Actor</h1>
<p>A dungeon actor is used to build your dungeons. Drop a dungeon actor into the scene and reset its transform</p>
<div class="figure">
<img src="_html/images/user_guide/dugeon_actor_01.png" alt="" />

</div>
<p>The dungeon actor generate a procedural layout for your dungeon based on the various configuration paramters.<br />
After the layout has been generated, it spawns meshes, lights, blueprints etc, based on the mappings you have defined in the Theme file. This way you can define what meshes needs to be attached to the floors, walls, ceilings, etc</p>
<h2 id="procedural-generation-parameters">Procedural Generation Parameters</h2>
<p>Select the Dungeon Actor and expand the Config structure in the Details window <img src="_html/images/user_guide/config_params.png" alt="Config Parameters" /></p>
<p>The various config parameters determine how the layout of the dungeon is generated procedurally. The default layout generator algorithm is implemented based on the excellent <a href="http://www.reddit.com/r/gamedev/comments/1dlwc4/procedural_dungeon_generation_algorithm_explained/">writeup</a> by TinyKeep’s author Phi Dinh</p>
<p>The various parameters are:</p>
<ul>
<li>Seed: Changing this number would completely change the layout of the dungeon. This is the base random number seed that is used to build the dungeon</li>
<li>Num Cells: The number of cells to use while building the dungeon. You will not see these cells in the final result. A larger number would create a bigger and more complex dungeon. A number of 100-150 builds a medium to large sized dungeon. Experiment with different ranges</li>
<li>Min/Max Cell Size: This is how big or small a cell size can be. While generation, a cell is either converted to a room, corridor or is discarded completely. The Cell width / height is randomly chosen within this range</li>
<li>Room Area Threshold: If a cell size exceeds past this limit, it is converted into a room. After cells are promoted to rooms, all rooms are connected to each other through corridors (either directly or indirectly. See spanning tree later)</li>
<li>Room Aspect Delta: The aspect ratio of the cells (width to height ratio). Keeping this value near 0 would create square rooms. Bringing this close to 1 would create elongated / stretched rooms with a high width to height ratio</li>
<li>Spanning Tree Loop: Determines how many loops you would like to have in your dungeon. A value near 0 will create fewer loops creating linear dungeons. A value near 1 would create lots of loops, which would look unoriginal. Its good to allow a few loops so a value close to zero (like 0.2 should be good)</li>
<li>Stair Connection Tolerance: The generator would add stairs to make different areas of the dungeon accessible. However, we do not want too many stairs. For e.g., before adding a stair in a particular elevated area, the generator would check if this area is already accessible from a nearby stair. If so, it would not add it. This tolerance parameter determines how far to look for an existing path before we can add a stair. Play with this parameter if you see too many stairs close to each other, or too few</li>
<li>Height Variation Probability: Tweak this value to increase / reduce the height variations (and stairs) in your dungeon. A value close to 0 reduces the height variation and increases as you approach 1. Increasing this value to a higher level might create dungeons with no place for proper stair placement since there is too much height variation. A value of 0.2 to 0.4 seems good</li>
<li>Normal Mean / Std: The random number generator used in the dungeon generator does not use a uniform distribution. Instead it uses a normal distribution to get higher frequency of lower values and fewer higher values (and hence fewer room cells and a lot more corridor cells). Play with these parameters for different results</li>
<li>Grid Cell Size: The dungeon generator works on a grid based system and required modular mesh assets to be placed on each cell (floors, walls, doors etc). This important field specifies the size of the cell to use. This size is determined by the art asset used in the dungeon theme designed by the artist. In the demo, we have a floor mesh that is 400x400. The height of a floor is chosen to be 200 units as the stair mesh is 200 units high. Hence the defaults are set to 400x400x200. You should change this to the dimension of the modular asset your designer has created for the dungeon</li>
<li>Max Allowed Stair Height: The number of logical floor units the dungeon height can vary. This determines how high the dungeon’s height can vary (e.g. max 2 floors high). Set this value depending on the stair meshes you designer has created. In the sample demo, there are two stair meshes, one 200 units high (1 floor) and another 400 units high (2 floors). So the default is set to 2</li>
<li>Initial Room Radius: Internal Usage. Keep to a low value like 10-15</li>
<li>Floor Height: Internal Usage. Ignored for now</li>
</ul>
<div id="footer">
  &copy; 2015 <a href="http://johnmacfarlane.net/">Code Respawn Technologies Pvt Ltd</a>
</div>
</body>
</html>
